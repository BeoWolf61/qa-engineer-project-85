---

- id: 1
  summary: |
    Регистрация на сайте через почту
  requirement: |
    Должна быть создана новая учетная запись на сайте
  prerequisites: |
    Находимся на главной странице - https://codebattle.hexlet.io/ , учетная запись не авторизована
  test-data: |
    empty
  steps:
    - Нажимаем кнопку "Sign up"
    - Заполняем поле Nickname
    - Заполняем поле Email
    - Заполняем поля Password и Password Confirmation 
    - Нажимаем кнопку "Submit"
  expected-result: |
    Происходит переход на страницу выбора баттлов, мы становимся авторизованным пользователем 
    (видим в правом верхнем углу свое имя, указанное при регистрации и имеем доступ к личному кабинету)

- id: 2
  summary: |
    Авторизация по зарегестрированной учетной записи
  requirement: |
    Должна произойти авторизация на сайте
  prerequisites: |
    Находимся на главной странице - https://codebattle.hexlet.io/ , учетная запись не авторизована
  test-data: |
    email: test_user@gmail.com
    password: testpass
  steps:
    - Нажимаем кнопку "Sign in"
    - Заполняем поле email
    - Заполняем поле password
    - Нажимаем кнопку "Submit"
  expected-result: |
    Произошла успешная авторизация (видим в правом верхнем углу свое имя, указанное при регистрации и имеем доступ к личному кабинету),
    попадаем на страницу с баттлами

- id: 3
  summary: |
    Восстановление доступа к аккаунту через email
  requirement: |
    Доступ к учетной записи должен быть восстановлен
  prerequisites: |
    Находимся на главной странице - https://codebattle.hexlet.io/ , учетная запись не авторизована
  test-data: |
    Необходимо быть авторизованным в почте, которая привязана к учетной записи кодбаттла
  steps:
    - Нажимаем кнопку "Sign in"
    - Нажимаем кнопку "Forgot your password?"
    - Вводим email зарегистрированной учетной записи
    - Открываем страницу почты во второй вкладке браузера
    - Открываем письмо, полученное от отправителя 'noreply@codebattle-5f929.firebaseapp.com'
    - Переходим по ссылке в письме
    - Вводим новый пароль от учетной записи в появившемся окне
    - Возвращаемся на вкладку коддбатла
    - Нажимаем кнопку "Sign in"
    - Вводим email и новый пароль от учетной записи
  expected-result: |
    Происходит успешная авторизация на сайте(видим в правом верхнем углу свое имя, указанное при регистрации и имеем доступ к личному кабинету),
    находимся на странице выбора баттла

- id: 4
  summary: |
    Авторизация через Discord
  requirement: |
    Должна произойти авторизация на сайте
  prerequisites: |
    Мы должны иметь учетную запись Discord и быть в ней авторизованы
  test-data: |
    empty
  steps:
    - Нажимаем кнопку "Sign in"
    - Нажимаем кнопку "Sign in with Discord"
    - В появившемся окне Discord нажимаем кнопкку "Авторизовать"
  expected-result: |
    Происходит авторизация на сайт(видим в правом верхнем углу свое имя, указанное при регистрации и имеем доступ к личному кабинету),
    находимся на странице выбора баттла

- id: 5
  summary: |
    Авторизация через GitHub
  requirement: |
    Должна произойти авторизация на сайте
  prerequisites: |
    Имеем зарегистрированный и авторизованный аккаунт на GitHub
  test-data: |
    empty
  steps:
    - Нажимаем на кнопку "Sign in"
    - Нажимаем на кнопку "Sign in with Github"
    - В появившемся окне подтверждаем связку учетных записей
  expected-result: |
    Происходит успешная авторизация на сайте(видим в правом верхнем углу свое имя, указанное при регистрации и имеем доступ к личному кабинету),
    находимся на странице выбора баттла

- id: 6
  summary: |
    Пробный баттл без авторизации
  requirement: |
    Должна быть возможность сыграть пробный баттл без авторизованной учебной записи
  prerequisites: |
    Находимся на главной странице - https://codebattle.hexlet.io/ , учетная запись не авторизована
  test-data: |
    empty
  steps:
    - Нажимаем на кнопку "Try simple battle"
  expected-result: |
    Открывается страница с баттлом, интерфейс доступен для выполнения задания
    
- id: 7
  summary: |
    Невозможность регистрации с коротким именем
  requirement: |
    Регистрация не должна пройти проверку на валидацию по имени
  prerequisites: |
    Находимся на странице регистрации - https://codebattle.hexlet.io/users/new?next=/
  test-data: |
    nick: qw
    email: test_user@gmail.com
    password: testpass
  steps:
    - Заполняем поля для регистрации 
    - Нажимаем кнопку "Submit"
  expected-result: |
    Регистрация не проходит, под полем 'Nickname' появляется сообщение об ошибке - "Should be from 3 to 16 characters"

- id: 8
  summary: |
    Невозможность регистрации с длинным именем
  requirement: |
    Регистрация не должна пройти проверку на валидацию по имени
  prerequisites: |
    Находимся на странице регистрации - https://codebattle.hexlet.io/users/new?next=/
  test-data: |
    nick: testuser123456789
    email: test_user@gmail.com
    password: testpass
  steps:
    - Заполняем поля для регистрации 
    - Нажимаем кнопку "Submit"
  expected-result: |
    Регистрация не проходит, под полем 'Nickname' появляется сообщение об ошибке - "Should be from 3 to 16 characters"

- id: 9
  summary: |
    Невозможность регистрации с именем, состоящим из цифр
  requirement: |
    Регистрация не должна пройти проверку на валидацию по имени
  prerequisites: |
    Находимся на странице регистрации - https://codebattle.hexlet.io/users/new?next=/
  test-data: |
    nick: 123
    email: test_user@gmail.com
    password: testpass
  steps:
    - Заполняем поля для регистрации 
    - Нажимаем кнопку "Submit"
  expected-result: |
    Регистрация не проходит, получаем ошибку - 
    "Should contain Latin letters, numbers and underscores. Only begin with latin letter"

- id: 10
  summary: |
    Проверка валидности указания региона почты при регистрации 
  requirement: |
    Невалидная почта не должна пройти регистрацию
  prerequisites: |
    Находимся на странице регистрации - https://codebattle.hexlet.io/users/new?next=/
  test-data: |
    nick: testuser123
    email: test_user@gmail
    password: testpass
  steps:
    - Вводим данные для регистрации
    - Нажимаем кнопку "Submit"
  expected-result: |
    Появляется сообщение об ошибке - "Invalid email"

- id: 11
  summary: |
    Проверка валидности использования знака "@" в адресе почты при регистрации 
  requirement: |
    Невалидная почта не должна пройти регистрацию
  prerequisites: |
    Находимся на странице регистрации - https://codebattle.hexlet.io/users/new?next=/
  test-data: |
    nick: testuser123
    email: test_usergmail.com
    password: testpass
  steps:
    - Вводим данные для регистрации
    - Нажимаем кнопку "Submit"
  expected-result: |
    Появляется сообщение об ошибке - "Invalid email"

- id: 12
  summary: |
    Проверка валидности имени почты при регистрации
  requirement: |
    Невалидная почта не должна пройти регистрацию
  prerequisites: |
    Находимся на странице регистрации - https://codebattle.hexlet.io/users/new?next=/
  test-data: |
    nick: testuser123
    email: @gmail.com
    password: testpass
  steps:
    - Вводим данные для регистрации
    - Нажимаем кнопку "Submit"
  expected-result: |
    Появляется сообщение об ошибке - "Invalid email"

- id: 13
  summary: |
    Проверка валидности короткого пароля (менее 6 символов)
  requirement: |
    Невалидный пароль не должен пройти регистрацию
  prerequisites: |
    Находимся на странице регистрации - https://codebattle.hexlet.io/users/new?next=/
  test-data: |
    nick: testuser123
    email: test_user@gmail.com
    password: testp
  steps:
    - Вводим данные для регистрации
    - Нажимаем кнопку "Submit"
  expected-result: |
    Появляется сообщение с ошибкой - "Should be from 6 to 16 characters"

- id: 14
  summary: |
    Проверка валидности длинного пароля (более 16 символов)
  requirement: |
    Невалидный пароль не должен пройти регистрацию
  prerequisites: |
    Находимся на странице регистрации - https://codebattle.hexlet.io/users/new?next=/
  test-data: |
    nick: testuser123
    email: test_user@gmail.com
    password: testpass123456789
  steps:
    - Вводим данные для регистрации
    - Нажимаем кнопку "Submit"
  expected-result: |
    Появляется сообщение с ошибкой - "Should be from 6 to 16 characters"

- id: 15
  summary: |
    Создание баттла с ботом
  requirement: |
    Должен быть создан баттл и открыта его страница
  prerequisites: |
    У игрока перед созданием должны быть завершены предыдущие игры
    Находимся на главной странице сайта, учетная запись авторизована
  test-data: |
    empty
  steps:
    - Нажимаем кнопку "Create a game"
    - В строке "Game Type" нажимаем кнопку "With a bot"
    - Строки level, time control, task оставляем в исходных значениях
    - Нажимаем кнопку "Create battle"
  expected-result: |
    Создается баттл и мы попадаем на его страницу 

- id: 16
  summary: |
    Создание баттла с рандомным пользователем
  requirement: |
    Должен быть создан баттл, доступный для присоединения любому пользователю сайта
  prerequisites: |
    У игрока перед созданием должны быть завершены предыдущие игры
    Находимся на главной странице сайта, учетная запись авторизована
  test-data: |
    empty
  steps:
    - Нажимаем кнопку "Create a game"
    - В строке "Game type" выбираем "With other user"
    - Остальные строки оставляем в исходном значении
    - Нажимаем кнопку "Create battle"
  expected-result: |
    В списке активных баттлов во вкладке Lobby появляется созданный нами баттл
  
- id: 17
  summary: |
    Создание баттла с конкретным пользователем
  requirement: |
    Должно быть создан баттл с выбранным пользователем
  prerequisites: |
    У игрока перед созданием должны быть завершены предыдущие игры
    Находимся на главной странице сайта, учетная запись авторизована
    Также имеем вторую авторизованную учетную запись в другом браузере
  test-data: |
    empty
  steps:
    - Нажимаем кнопку "Create a game" в лобби
    - В строке "Game type" выбираем "With a friend"
    - В появившейся строке "Choose opponent" выбираем соперника
      #можно листать колесиком мыши, а можно ввести имя. серый круг - юзер оффлайн, зеленый - онлайн
    - Нажимаем кнопку "Create batle"
    - Во второй учетной записи около никнейма появляется уведомление, нажимаем на него
    - В появившемся окне нажимаем кнопку "Accept"
  expected-result: |
    У обоих пользователей появляется окно с баттлом, ожидающее выполнение таска

- id: 18
  summary: |
    - Создание турнира
  requirement: |
    Турнир должен быть создан и доступен для присоединения других участников
  prerequisites: |
    У игрока перед созданием должны быть завершены предыдущие игры
    Находимся во вкладке tournaments на главной странице, учетная запись авторизована
  test-data: |
    empty
  steps:
    - Под списком "Live tournaments" Нажимаем кнопку "Tournaments info"
    - Скроллим страницу в низ сайта до раздела "Create a new tournament"
    - Заполняем все требуемые ячейки
    - Нажимаем кнопку "Create"
  expected-result: |
    Создается турнир доступный для присоединения других игроков

- id: 19
  summary: |
    Просмотр личного профиля пользователя
  requirement: |
    Учетная запись должна отображать информацию о себе
  prerequisites: |
    Находимся на главной странице, учетная запись авторизована
  test-data: |
    empty
  steps:
    - Нажимаем на свой никнейм в правом верхнем углу
    - В появившемся окне нажимаем кнопку "My profile"
    - Просматриваем открывшуюся страницу
    - Нажимаем вкладку "Completed games"
  expected-result: |
    На странице учетной записи видим никнейм, язык, дату создания учетной записи,
    информация о рейтинге и проведенных играх

- id: 20
  summary: |
    Редактирование профиля по никнейму
  requirement: |
    Должна быть возможность к смене никнейма
  prerequisites: |
    Находимся на главной странице сайта, учетная запись авторизована
  test-data: |
    empty
  steps:
    - Нажимаем на никнейм в правом верхнем углу экрана
    - Нажимаем на кнопку "Settings"
    - В открывшемся окне настроек в ячейке "Your name" изменяем свой никнейм
    - Нажимаем кнопку "Save"
  expected-result: |
    Появляется уведомление об успешном сохранении настроек и никнейм изменяется

- id: 21
  summary: |
    Редактирование профиля по языку программирования
  requirement: |
     Должна быть возможность к смене языка программирования
  prerequisites: |
    Находимся на главной странице сайта, учетная запись авторизована
  test-data: |
    empty
  steps:
    - Нажимаем на никнейм в правом верхнем углу экрана
    - Нажимаем на кнопку "Settings"
    - В открывшемся окне настроек нажимаем на ячейку "Your weapon"
    - Во всплывающем окне выбираем предпочитаемый язык
    - Нажимаем кнопку "Save"
    - Нажимаем на аватар и кнопку "My profile" в открывшемся окне
    - Смотрим на строку "Lang" в левой части профиля
  expected-result: |
    Логотип языка программирования изменился на тот, который мы выбрали
    
- id: 22
  summary: |
    Просмотр лидборда
  requirement: |
    Пользователь должен иметь возможность просмотра лидеров среди всех юзеров
  prerequisites: |
    Находимся на главной странице сайта, учетная запись залогинена
  test-data: |
    empty
  steps:
    - Скроллим страницу вниз до раздела "Leaderbord"
    - Нажимаем кнопку "Top list"
    - Переключаемся между вкладками weekly, monthly, total
    - Наблюдаем за изменением списка
  expected-result: |
    Страница с пользователями обновляется согласно фильтрации и отображаются участники,
    подходящие по критериям

- id: 23
  summary: |
    Просмотр истории последних игр
  requirement: |
    Пользователь должен иметь возможность видеть последние игры
  prerequisites: |
    Находимся на главной странице сайта, учетная запись авторизована
  test-data: |
    empty
  steps:
    - Нажимаем на вкладку "History"
  expected-result: |
    Видим историю игр за сегодняшний день

- id: 24
  summary: |
    Проверка запросов на сервер при авторизации
  requirement: |
    Запрос должен быть успешно доставлен на сервер без ошибок
  prerequisites: |
    Находимся на главной странице записи, учетка не авторизована
  test-data: |
    empty
  steps:
    - Нажимаем кнопку F12 на клавиатуре
    - Нажимаем кнопку "Sign in"
    - Вводим данные для авторизации
    - Нажимаем кнопку "Submit"
  expected-result: |
    Все данные успешно уходят на сервер и видим статус 200

- id: 25
  summary: |
    Проверка запросов на сервер при создании игры
  requirement: |
    Запрос должен быть успешно доставлен на сервер без ошибок
  prerequisites: |
    Находимся на главной странице записи, учетка авторизована
  test-data: |
    empty
  steps:
    - Нажимаем кнопку F12 на клавиатуре
    - Нажимаем кнопку "Create a game"
    - Выбираем желаемые настройки, либо оставляем дефолтные
    - Нажимаем кнопку "Create battle"
  expected-result: |
    Все данные успешно уходят на сервер и видим статус 200

- id: 26
  summary: |
    Проверка принятия игры другим пользователем
  requirement: |
    Игрок должен принять игру из списка доступных игр и баттл должен запуститься у обоих игроков
  prerequisites: |
    Находимся на главной странице кодбаттла
    Имеем вторую авторизованную учетную запись и находимся на главной странице кодбаттла
  test-data: |
    empty
  steps:
   - Нажимаем кнопку "Create a game"
   - В графе "Game type" выставляем значение "With other users", остальные оставляем по умолчанию
   - Нажимаем кнопку "Create battle"
   - На второй учетной записи видим, что в списке доступных игр появилась новая игра, созданная нами с первой учетной записи
   - Нажимаем кнопку "Fight" на второй учетной записи
  expected-result: |
    Запускается баттл на обоих учетных записях

- id: 27
  summary: |
    Проверка правильности выполнения задачи автотестом во время баттла
  requirement: |
    Автотест должен выполнять проверку нашего решения во время баттла
  prerequisites: |
    Находимся на главной странице сайта, учетная запись авторизована
  test-data: |
    empty
  steps:
   - Нажимаем кнопку "Create a game"
   - В графе "Game type" выставляем значение "With a bot", остальные оставляем по умолчанию
   - Нажимаем кнопку "Create battle"
   - В запустившейся игре нажимаем кнопку "Run"
  expected-result: |
    Автотест выполняет проверку сделанного нами решения задачи и дает ответ (положительный либо отрицательный)

- id: 28
  summary: |
    Возможность сдаться во время игры
  requirement: |
    После выбора "сдаться" игра должна отобразить победителя и сдавшегося
  prerequisites: |
    Находимся на главной странице сайта, учетная запись авторизована
  test-data: |
    empty
  steps:
   - Нажимаем кнопку "Create a game"
   - В графе "Game type" выставляем значение "With a bot", остальные оставляем по умолчанию
   - Нажимаем кнопку "Create battle"
   - Нажимаем кнопку "Give Up", которая обозначена флагом
   - В окне подтверждения нажимаем "Give Up" еще раз
  expected-result: |
    После подтверждения появляется окно с уведомлением о проигрыше, а так же знаки белый флаг около поля кода сдавшегося
    и кубок около поля кода победившего игрока

- id: 29
  summary: |
    Отправка запроса на сервер при написании сообщений в чат во время баттла
  requirement: |
    Запрос должен быть успешно отправлено 
  prerequisites: |
    Находимся на главной странице сайта, учетная запись авторизована, открыт DevTools (F12)
  test-data: |
    empty
  steps:
   - Нажимаем кнопку "Create a game"
   - В графе "Game type" выставляем значение "With a bot", остальные оставляем по умолчанию
   - Нажимаем кнопку "Create battle"
   - На странице появившейся игры отправляем сообщение с любым содержимым в чат
  expected-result: |
    Видим в отправленном запросе на сервер статус 200 после отправки сообщения в чат

- id: 30
  summary: |
    Отображение сообщений, отправленных в чат, у всех игроков, находящихся на странице баттла
  requirement: |
    Сообщение должно быть отражено у другого пользователя после отправки его первым пользователем
  prerequisites: |
    Находимся на главной странице сайта, учетная запись авторизована
    Имеем вторую авторизованную учетную запись и находимся на главной странице кодбаттла
  test-data: |
    empty
  steps:
   - Нажимаем кнопку "Create a game"
   - В графе "Game type" выставляем значение "With other users", остальные оставляем по умолчанию
   - Нажимаем кнопку "Create battle"
   - На второй учетной записи видим, что в списке доступных игр появилась новая игра, созданная нами с первой учетной записи
   - Нажимаем кнопку "Fight" на второй учетной записи
   - С первой учетной записи отправляем в чат сообщение с любым содержимым
  expected-result: |
    На экране второй учетной записи видим в чате сообщение, отправленное от первой учетной записи

- id: 31
  summary: |
    Проверка сброса написанного кода до исходного состояния во время игры
  requirement: |
    Код должен быть сброшен до исходного состояния
  prerequisites: |
    Имеем авторизованную учетную запись и находимся на главной странице сайта
  test-data: |
    empty
  steps:
   - Нажимаем кнопку "Create a game"
   - В графе "Game type" выставляем значение "With a bot", остальные оставляем по умолчанию
   - Нажимаем кнопку "Create battle"
   - В окно с решением задачи производим рандомный набор символов с клавиатуры
   - Нажимаем кнопку "Reset solution" обозначенную двумя стрелочками, создающими форму круга
  expected-result: |
    Видим, что написанные нами символы исчезли и поле вернулось в исходное состояние

